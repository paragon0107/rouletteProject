#!/bin/sh

set -e

SCRIPT_DIR=$(CDPATH= cd -- "$(dirname -- "$0")" && pwd)
GRADLE_BIN="/Users/sinmingyu/.gradle/wrapper/dists/gradle-8.11.1-bin/bpt9gzteqjrbo1mjrsomdt32c/gradle-8.11.1/bin/gradle"

if [ ! -x "$GRADLE_BIN" ]; then
  echo "로컬 Gradle 실행 파일을 찾을 수 없습니다: $GRADLE_BIN" >&2
  exit 1
fi

# Kotlin/Gradle 호환성을 위해 기본 JDK를 21로 고정한다.
if [ -z "${JAVA_HOME:-}" ]; then
  JAVA_HOME="$(/usr/libexec/java_home -v 21 2>/dev/null || true)"
  export JAVA_HOME
fi

export GRADLE_USER_HOME="${GRADLE_USER_HOME:-$SCRIPT_DIR/.gradle-local}"
export GRADLE_OPTS="${GRADLE_OPTS:-} -Dorg.gradle.native=false"

exec "$GRADLE_BIN" "$@"
