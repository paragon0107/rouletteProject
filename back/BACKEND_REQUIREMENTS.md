# 백엔드 요구사항 정리

`PROBLEM.md` 기준으로, 백엔드(Spring Boot + Kotlin) 범위만 추린 문서입니다.

## 1. 기술 스택
- Spring Boot 3.x + Kotlin
- Java 21
- JPA
- Swagger
- DB는 `H2` 로 구현 후 추후 Postgresql 로 변경

## 2. API 기능 요구사항

### 인증
- 로그인 Mocking: 닉네임(또는 아이디)만 입력하는 간단 로그인

### 사용자 기능
- 룰렛 참여
  - 1일 1회 제한
  - 100(40%), 300(30%), 500(20%), 1000(10%) 랜덤 지급
- 오늘 참여 여부 조회
- 오늘 잔여 예산 조회
- 내 포인트 목록 조회(유효기간 포함)
- 내 포인트 잔액 조회
- 만료 예정 포인트 조회(7일 이내 만료)
- 상품 목록 조회
- 상품 주문(포인트 차감)
- 주문 내역 조회

### 어드민 기능
- 일일 예산 조회/설정
- 참여자 수
- 참여자 목록(참여 취소를 하기위한 id를 포함한 참여자 목록)
- 상품 CRUD(목록, 등록, 수정)
- 주문 취소(포인트 환불)
- 룰렛 참여 취소(포인트 회수)

## 3. 핵심 비즈니스 규칙
- 일일 총 예산: 기본 시나리오상 100,000p
- 예산 소진 시 룰렛 당첨 불가
- 포인트 유효기간: 획득일 + 30일
- 만료된 포인트는 사용 불가

## 4. 동시성/정합성 필수 조건
- 중복 참여 방지
  - 같은 유저의 동시 요청에서도 하루 1회만 성공해야 함
- 예산 초과 지급 방지
  - 동시 요청이 몰려도 일일 예산 범위를 절대 초과하면 안 됨

## 5. 필수 구현 체크리스트
- 로그인 Mocking
- 룰렛 참여(1일 1회, 100~1000p 랜덤)
- 일일 예산 초과 방지
- 포인트 유효기간(30일) 관리
- 7일 이내 만료 예정 포인트 조회
- 상품 CRUD(어드민)
- 상품 구매(포인트 차감)
- Swagger 기반 API 문서화

## 6. 백엔드 배포/제출 요구사항
- 백엔드 API 문서 접속 URL 제출
  - `/swagger-ui/index.html` 또는 `/api-docs`
- 백엔드 CI/CD 파이프라인 필수
  - GitHub Actions 또는 Jenkins
  - 코드 Push 시 빌드/테스트 자동 실행
  - 설정 파일(`.github/workflows/*`) 저장소 포함
